<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartTrust GPS Tracker</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f4f6f9;
      color: #333;
    }
    header {
      background: #2e86de;
      color: white;
      padding: 1rem;
      text-align: center;
      position: relative;
    }
    h1 {
      margin: 0;
    }
    .tap-area {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
    }
    .map-container {
      height: 400px;
      width: 100%;
    }
    .info {
      padding: 1rem;
    }
    .footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
      color: #aaa;
    }
    .admin-panel {
      display: none;
      background: #222;
      color: white;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      padding: 20px;
      overflow-y: auto;
      z-index: 9999;
    }
    .admin-panel table {
      width: 100%;
      margin-top: 20px;
      border-collapse: collapse;
      font-size: 14px;
    }
    .admin-panel table, th, td {
      border: 1px solid #888;
      padding: 8px;
    }
    .admin-panel h2 {
      color: #00ffcc;
    }
    .btn {
      background: #00ffcc;
      color: #000;
      border: none;
      padding: 10px 15px;
      margin: 10px 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1>SmartTrust GPS Viewer</h1>
    <div class="tap-area" id="tapArea"></div>
  </header>
  <div class="map-container" id="map"></div>
  <div class="info">
    <h3>Device Last Seen:</h3>
    <p id="lastSeen">Loading...</p>
    <h3>Coordinates:</h3>
    <p id="coords">--</p>
    <h3>Speed:</h3>
    <p id="speed">--</p>
    <h3>Direction:</h3>
    <p id="direction">--</p>
  </div>  <div class="admin-panel" id="adminPanel">
    <h2>Admin Panel</h2>
    <p><strong>Realtime Location Logs:</strong></p>
    <table>
      <thead>
        <tr><th>Time</th><th>Latitude</th><th>Longitude</th><th>Speed</th><th>Direction</th></tr>
      </thead>
      <tbody id="logTable"></tbody>
    </table>
    <button class="btn" onclick="closeAdmin()">Close Panel</button>
  </div>  <div class="footer">Â© 2025 SmartTrust. All rights reserved.</div>  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY"></script>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCvYA-6_hjcy47NHFCRoVK2JcrmcVKMVKw",
      authDomain: "gps-d0bab.firebaseapp.com",
      databaseURL: "https://gps-d0bab-default-rtdb.firebaseio.com",
      projectId: "gps-d0bab",
      storageBucket: "gps-d0bab.appspot.com",
      messagingSenderId: "810816177909",
      appId: "1:810816177909:web:aad210ebbb87f8d64ce7bc"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let map;
    let marker;
    function initMap(lat, lng) {
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 15,
        center: { lat, lng }
      });
      marker = new google.maps.Marker({ position: { lat, lng }, map });
    }

    db.ref("locations").on("value", snapshot => {
      const data = snapshot.val();
      const logs = Object.entries(data || {}).sort((a, b) => b[1].timestamp - a[1].timestamp);
      const latest = logs[0]?.[1];
      if (latest) {
        const { latitude, longitude, timestamp, speed = '--', direction = '--' } = latest;
        document.getElementById("lastSeen").textContent = new Date(timestamp).toLocaleString();
        document.getElementById("coords").textContent = `Lat: ${latitude}, Lng: ${longitude}`;
        document.getElementById("speed").textContent = `${speed} km/h`;
        document.getElementById("direction").textContent = direction;

        if (!map) initMap(latitude, longitude);
        else marker.setPosition({ lat: latitude, lng: longitude });
        map.setCenter({ lat: latitude, lng: longitude });

        let logsHtml = logs.map(([key, val]) =>
          `<tr><td>${new Date(val.timestamp).toLocaleString()}</td><td>${val.latitude}</td><td>${val.longitude}</td><td>${val.speed || '--'}</td><td>${val.direction || '--'}</td></tr>`
        ).join("");
        document.getElementById("logTable").innerHTML = logsHtml;
      }
    });

    let tapCount = 0;
    let lastTap = 0;
    document.getElementById("tapArea").addEventListener("click", () => {
      const now = Date.now();
      if (now - lastTap < 600) {
        tapCount++;
        if (tapCount >= 5) {
          document.getElementById("adminPanel").style.display = "block";
          tapCount = 0;
        }
      } else {
        tapCount = 1;
      }
      lastTap = now;
    });

    function closeAdmin() {
      document.getElementById("adminPanel").style.display = "none";
    }
  </script></body>
</html>
