<!DOCTYPE html>
<html>
<head>
  <title>Location Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 40px;
      background: #f0f0f0;
    }
    button {
      padding: 15px 25px;
      font-size: 18px;
      background-color: #4285f4;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #3367d6;
    }
    #status {
      margin-top: 20px;
      font-weight: bold;
      color: green;
    }
  </style>
</head>
<body>
  <h1>üìç Location Tracker</h1>
  <p>Click the button below to send your current GPS location to Firebase.</p>
  <button onclick="sendLocation()">Send My Location</button>
  <p id="status"></p>

  <!-- Firebase App SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCvYA-6_hjcy47NHFCRoVK2JcrmcVKMVKw",
      authDomain: "gps-d0bab.firebaseapp.com",
      databaseURL: "https://gps-d0bab-default-rtdb.firebaseio.com",
      projectId: "gps-d0bab",
      storageBucket: "gps-d0bab.appspot.com",
      messagingSenderId: "810816177909",
      appId: "1:810816177909:web:aad210ebbb87f8d64ce7bc",
      measurementId: "G-5EX9DF2QKH"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    function sendLocation() {
      const status = document.getElementById("status");
      status.innerText = "Getting your location...";

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition((position) => {
          const { latitude, longitude } = position.coords;
          const timestamp = new Date().toISOString();
          const data = {
            latitude,
            longitude,
            time: timestamp
          };

          const key = Date.now(); // use timestamp as key
          firebase.database().ref("locations/" + key).set(data)
            .then(() => {
              status.innerText = "‚úÖ Location sent successfully!";
            })
            .catch((error) => {
              status.innerText = "‚ùå Error sending location: " + error;
            });
        }, (error) => {
          status.innerText = "‚ùå Location error: " + error.message;
        });
      } else {
        status.innerText = "‚ùå Geolocation not supported on this device.";
      }
    }
  </script>
</body>
</html>
