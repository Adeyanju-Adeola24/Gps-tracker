<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Client Project Portal</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
    }
    header, section {
      padding: 20px;
      background: white;
      margin-bottom: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .admin-panel {
      display: none;
      background: #ffffff;
      border: 1px solid #ddd;
      padding: 20px;
      margin: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 8px;
      text-align: left;
    }
    .filter-input {
      padding: 8px;
      margin: 10px 0;
      width: 100%;
      max-width: 300px;
    }
    #map {
      width: 100%;
      height: 300px;
      margin-top: 10px;
    }
  </style>
</head>
<body>  <header>
    <h2>Client Project Portal</h2>
    <p><strong>Client Requirements:</strong> All specifications must be approved and timestamped.</p>
    <p><strong>Terms and Review:</strong> Final review will be automatically saved and verified upon access.</p>
    <p><strong>Legal & Compliance:</strong> Ensure full adherence to documentation agreements.</p>
  </header>  <section>
    <p style="opacity:0;" id="secretTrigger">Tap Area</p>
  </section>  <div id="passwordPrompt" style="display: none; padding: 20px;">
    <h3>Enter password to access admin panel:</h3>
    <input type="password" id="adminPassword" placeholder="Enter password">
    <button onclick="checkPassword()">Enter</button>
  </div>  <div id="adminPanel" class="admin-panel">
    <h2>Admin Dashboard</h2>
    <input type="text" class="filter-input" placeholder="Search by device or location..." oninput="filterTable(this.value)" />
    <button onclick="exportCSV()">Export as CSV</button>
    <p>Daily logs: <span id="logCount">0</span></p>
    <table id="logTable">
      <thead>
        <tr>
          <th>Device</th>
          <th>Latitude</th>
          <th>Longitude</th>
          <th>Timestamp</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <div id="map"></div>
  </div>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCvYA-6_hjcy47NHFCRoVK2JcrmcVKMVKw",
      authDomain: "gps-d0bab.firebaseapp.com",
      databaseURL: "https://gps-d0bab-default-rtdb.firebaseio.com",
      projectId: "gps-d0bab",
      storageBucket: "gps-d0bab.appspot.com",
      messagingSenderId: "810816177909",
      appId: "1:810816177909:web:aad210ebbb87f8d64ce7bc"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const secretTrigger = document.getElementById('secretTrigger');
    let tapCount = 0;

    secretTrigger.addEventListener('click', () => {
      tapCount++;
      if (tapCount >= 5) {
        document.getElementById('passwordPrompt').style.display = 'block';
      }
    });

    function checkPassword() {
      const pass = document.getElementById('adminPassword').value;
      if (pass.toLowerCase() === 'ascii') {
        document.getElementById('adminPanel').style.display = 'block';
        document.getElementById('passwordPrompt').style.display = 'none';
        fetchData();
      } else {
        alert('Incorrect password');
      }
    }

    function fetchData() {
      const tbody = document.querySelector("#logTable tbody");
      tbody.innerHTML = "";
      let count = 0;
      db.ref("/locations").on("value", (snapshot) => {
        tbody.innerHTML = "";
        const data = snapshot.val();
        for (const key in data) {
          const { device, lat, lng, timestamp } = data[key];
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${device || "Unknown"}</td>
            <td>${lat || "N/A"}</td>
            <td>${lng || "N/A"}</td>
            <td>${new Date(timestamp || Date.now()).toLocaleString()}</td>
          `;
          tbody.appendChild(tr);
          count++;
          addMapMarker(lat, lng, device);
        }
        document.getElementById("logCount").textContent = count;
      });
    }

    function filterTable(value) {
      const rows = document.querySelectorAll("#logTable tbody tr");
      rows.forEach(row => {
        row.style.display = row.textContent.toLowerCase().includes(value.toLowerCase()) ? '' : 'none';
      });
    }

    function exportCSV() {
      let csv = "Device,Latitude,Longitude,Timestamp\n";
      document.querySelectorAll("#logTable tbody tr").forEach(row => {
        const cols = Array.from(row.children).map(td => td.textContent);
        csv += cols.join(",") + "\n";
      });
      const blob = new Blob([csv], { type: 'text/csv' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'location_logs.csv';
      a.click();
    }

    let map;
    let markers = [];

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 0, lng: 0 },
        zoom: 2,
      });
    }

    function addMapMarker(lat, lng, label) {
      if (!lat || !lng) return;
      const marker = new google.maps.Marker({
        position: { lat: parseFloat(lat), lng: parseFloat(lng) },
        map,
        title: label
      });
      markers.push(marker);
    }
  </script>  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap" async defer></script></body>
  </html>
